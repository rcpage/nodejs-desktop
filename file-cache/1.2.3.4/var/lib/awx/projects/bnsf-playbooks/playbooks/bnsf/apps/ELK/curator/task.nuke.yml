---
    - name: Delete curator directories
      include_tasks: task.dir.delete.yml

    - name: Delete curator log file
      include_tasks: task.dir.delete_log.yml

    - name: Uninstall curator
      include_tasks: task.uninstall.yml

    - name: Check system for uninstall
      shell: "{{item}}"
      register: checkoutput
      ignore_errors: yes
      with_items:
        - "ls /elk/logs"
        - "ls /elk/app"
        - "rpm -q elasticsearch-curator"

    - name: Process test results
      set_fact:
        result: FAIL
        test_results:
          - "{{checkoutput.results[0].stdout == ''}}"
          - "{{checkoutput.results[1].stdout == ''}}"
          - "{{checkoutput.results[2].stdout == 'package elasticsearch-curator is not installed'}}"

#    - set_fact:
#        result: "PASS"
#      when: test_results[0] && test_results[1] && test_results[2]

    - name: Test Results
      debug: var=test_results
