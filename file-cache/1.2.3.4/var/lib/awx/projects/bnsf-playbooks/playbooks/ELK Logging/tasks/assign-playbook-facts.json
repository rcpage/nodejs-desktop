{
  "name": "Set playbook facts",
  "tags": [
    "assign",
    "playbook",
    "facts"
  ],
  "set_fact": {
    "ELK_COPY_FILES": [
      {
        "src": "{{ files ~ '/certificate/{{chef_environment}}/ElasticKeystore.jks' }}",
        "dest": "/elk/app/elasticsearch/config/x-pack/ElasticKeystore.jks"
      }
    ],
    "ELK_LINKS": [
      {
        "src": "/opt/elasticsearch-curator",
        "path": "{{elk.baseDirectory}}/elasticsearch-curator"
      }
    ],
    "ELK_INSTALL": [
      "java",
      "./{{curator.packageName}}"
    ],
    "ELK_UNINSTALL": [
      "elasticsearch-curator"
    ],
    "ELK_DIRS": [
      "{{ elk.rootDirectory }}",
      "{{ elk.baseDirectory }}",
      "{{ elk.dataDirectory }}",
      "{{ elk.logsDirectory }}"
    ],
    "ELASTIC_SEARCH_DIRS": [
      "{{ elasticSearch.directory }}",
      "{{ elasticSearch.binDirectory }}",
      "{{ elasticSearch.configDirectory }}",
      "{{ elasticSearch.xpackBinDirectory }}",
      "{{ elasticSearch.xpackConfigDirectory }}",
      "{{ elasticSearch.xpackGroupTempDirectory }}",
      "{{ elasticSearch.scriptsDirectory }}",
      "{{ elasticSearch.pluginsDirectory }}",
      "{{ elasticSearch.templateDirectory }}",
      "{{ elasticSearch.dataDirectory }}",
      "{{ elasticSearch.logsDirectory }}"
    ],
    "KIBANA_DIRS": [
      "{{ kibana.directory }}",
      "{{ kibana.configDirectory }}",
      "{{ kibana.pluginDirectory }}",
      "{{ kibana.binDirectory }}",
      "{{ kibana.dataDirectory }}",
      "{{ kibana.logsDirectory }}"
    ],
    "LOGSTASH_DIRS": [
      "{{ logstash.directory }}",
      "{{ logstash.configDirectory }}",
      "{{ logstash.defaultConfig }}",
      "{{ logstash.bluemixConfig }}",
      "{{ logstash.deadletterConfig }}",
      "{{ logstash.defaultConfigRoute }}",
      "{{ logstash.bluemixConfigRoute }}",
      "{{ logstash.deadletterConfigRoute }}",
      "{{ logstash.binDirectory }}",
      "{{ logstash.dataDirectory }}",
      "{{ logstash.logsDirectory }}",
      "{{ logstash.deadletterqueueDirectory }}",
      "{{ logstash.persistentqueueDirectory }}"
    ],
    "XPACK_CLIENT_PLUGIN_DIRS": [
      "{{ xPackClientPlugin.configDirectory }}",
      "{{ xPackClientPlugin.binDirectory }}"
    ],
    "WINLOG_BEAT_DIRS": [
      "{{ winlogBeat.directory }}"
    ],
    "CURATOR_DIRS": [
      "{{ curator.directory }}",
      "{{ curator.actionDirectory }}",
      "{{ curator.logsDirectory }}"
    ],
    "LMA_SERVICE_DIRS": [
      "{{ lmaService.directory }}",
      "{{ lmaService.logsDirectory }}"
    ],
    "LMA_REST_LOG_INGESTION_DIRS": [
      "{{ lmaRestLogIngestion.directory }}",
      "{{ lmaRestLogIngestion.logsDirectory }}"
    ],
    "ELK_PACKAGES": [
      {
        "url": "{{elasticSearch.payloadName}}",
        "dest": "./{{elasticSearch.packageName}}",
        "mode": "770"
      },
      {
        "url": "{{kibana.payloadName}}",
        "dest": "./{{kibana.packageName}}",
        "mode": "770"
      },
      {
        "url": "{{logstash.payloadName}}",
        "dest": "./{{logstash.packageName}}",
        "mode": "770"
      },
      {
        "url": "{{xPackClientPlugin.payloadName}}",
        "dest": "./{{xPackClientPlugin.packageName}}",
        "mode": "770"
      },
      {
        "url": "{{curator.payloadName}}",
        "dest": "./{{curator.packageName}}",
        "mode": "770"
      }
    ]
  }
}